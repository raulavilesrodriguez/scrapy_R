sapply(list(pages_ordered), function(pagina){
#data <-read_html(pagina, encoding="UTF-8")
print(length(pagina))
})
# scrapy of each page
sapply(list(pages_ordered), function(pagina){
#data <-read_html(pagina, encoding="UTF-8")
print(length(pagina))
})
# scrapy of each page
sapply(list(pages_ordered), function(pagina){
#data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered, function(pagina){
#data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
lapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
pages_ordered <- rownames(file_info)
lapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
pages_ordered <- rownames(file_info)
pages_ordered <- list(pages_ordered)
# scrapy of each page
lapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
View(pages_ordered)
pages_ordered[[1]]
pages_ordered[[1]]
lapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
})
# scrapy of each page
lapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
})
View(pages_ordered)
pages_ordered[[1]]
length(pages_ordered[[1]])
length(pages_ordered)
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(pagina)
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
})
development_titulos
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
print(development_titulos)
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
print(development_titulos)
})
data <-read_html('data/page-1.html', encoding="UTF-8")
View(data)
data
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(data)
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
print(development_titulos)
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
print(titulos_development |> html_text2())
})
data <-read_html('data/page-1.html', encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
View(development_titulos)
titulos_development
data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
sapply(pages_ordered[[1]], function(pagina){
data <-read_html(pagina, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
pages_ordered <- rownames(file_info)
class(pages_ordered)
pages_ordered
length(pages_ordered)
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
for (pagina in pages_ordered[[1]]){
data <-read_html(pagina, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (pagina in pages_ordered[[1]]){
print(pagina)
data <-read_html(pagina, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
pages_ordered[[1]]
for (pagina in pages_ordered[[1]]){
print(pagina[1])
data <-read_html(pagina, encoding="UTF-8")
#print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (pagina in pages_ordered[[1]]){
print(pagina[2])
data <-read_html(pagina, encoding="UTF-8")
#print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (pagina in pages_ordered[[1]]){
print(pagina[1])
data <-read_html(pagina, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
data <-read_html('data/page-1.html', encoding="UTF-8")
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
for (pagina in pages_ordered[[1]]){
print(pagina[0])
data <-read_html(pagina, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
length(pages_ordered[[1]])
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
data <-read_html('data/page-1.html', encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in 1:length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in 1:length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
data <-read_html('data/page-15.html', encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
# Location of PROPERTY FINISHIED
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
pages_ordered <- rownames(file_info)
we <- c(pages_ordered)
we
sapply(we, function(page){
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page[1])
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
sapply(pages_ordered, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
# SCRAPY OF EACH PAGE
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
resultado <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
View(resultado)
resultado[["data/page-41.html"]]
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
library(tidyverse)
library(rvest)
library(httr)
#______SCRAPY WEB_______
# Algoritm to download all pages
set.seed(1)
page_id <- 0
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# SCRAPY OF EACH PAGE
resultado <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
View(resultado)
df_properties <- tibble(
unlist(resultado)
)
names(df_properties) <- c('ubicación')
View(df_properties)
