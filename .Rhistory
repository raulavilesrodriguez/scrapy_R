links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²?")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m(?i)²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m[(?i)²|(?i)2]")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)^m")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m[:graph:]")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m.")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*[m²]")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*m")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, ifelse(regex("\\d+\\s*m²"), regex("\\d+\\s*m2"))),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, ifelse(str_detect("\\d+\\s*m²"), regex("\\d+\\s*m²"), regex("\\d+\\s*m2"))),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, ifelse(str_detect("\\d+\\s*m²")==TRUE, regex("\\d+\\s*m²"), regex("\\d+\\s*m2"))),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, ifelse(str_detect(total, regex("\\d+\\s*m²"))==TRUE, regex("\\d+\\s*m²"), regex("\\d+\\s*m2"))),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("[USD|$]\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, ifelse(str_detect(total, regex("\\d+\\s*m²"))==TRUE,
regex("\\d+\\s*m²"),
regex("\\d+\\s*m2"))),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""),
links = paste('https://www.plusvalia.com', links, sep = ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
# add new columns
df_properties <- df_properties |> mutate(valor_metro = round(valor / area, digits = 2))
# delete duplicates
library(tidyverse)
library(rvest)
library(httr)
library(readxl)
library(stringr)
library(purrr) # to split strings
library(hrbrthemes)
library(viridis)
library(viridisLite)
