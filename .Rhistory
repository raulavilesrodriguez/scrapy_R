x[["headers"]]
x[["status_code"]]
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
View(x)
x[["status_code"]]
library(tidyverse)
library(rvest)
library(httr)
url <- paste0('https://www.plusvalia.com/inmuebles-en-venta-en-quito-pagina-1.html')
h <- read_html(url)
library(tidyverse)
library(rvest)
library(httr)
url <- paste0('https://www.plusvalia.com/inmuebles-en-venta-en-quito-pagina-1.html')
#h <- read_html(url)
#x <- GET(url, add_headers('user-agent' = 'Gov employment data scraper ([[byron.aviles@arcotel.gob.ec]])'))
library(RSelenium)
shell('docker run -d -p 4445:4444 selenium/standalone-firefox')
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445L, browserName = "firefox")
remDr$open()
library(tidyverse)
library(rvest)
library(httr)
url <- paste0('https://www.plusvalia.com/inmuebles-en-venta-en-quito-pagina-1.html')
#h <- read_html(url)
#x <- GET(url, add_headers('user-agent' = 'Gov employment data scraper ([[byron.aviles@arcotel.gob.ec]])'))
library(RSelenium)
shell('docker run -d -p 4445:4444 selenium/standalone-firefox')
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445L, browserName = "firefox")
remDr$open()
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
View(parsed_pages)
parsed_pages[[1]]
parsed_pages
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
View(parsed_pages)
parsed_pages[[1]]
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
View(data)
xml_child(data, 2)
xml_child(data, 2)
xml_child(data, 1)
xml_attrs(data)
data
class(data)
data
html_text(data)
data
html_text(data)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
library(tidyverse)
library(rvest)
library(httr)
url_web <- paste0('https://www.plusvalia.com/inmuebles-en-venta-en-quito-pagina-1.html')
library(tidyverse)
library(rvest)
library(httr)
page_id <- 1
url_web <- paste0('https://www.plusvalia.com/inmuebles-en-venta-en-quito-pagina-',page_id,'.html')
url_web
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
library(tidyverse)
library(rvest)
library(httr)
set.seed(1)
page_id <- 0
data <-read_html("data/page-1.html")
class(data)
html_text(data)
list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE)
all_pages <- list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE)
class(all_pages)
all_pages[1]
length(all_pages)
all_pages <- list(list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE))
View(all_pages)
all_pages[[1]]
sapply(all_pages, function(pagina){
print(pagina)
})
sapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE))
sapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE))
apply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
apply(all_pages, 1, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
lapply(all_pages, 1, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
lapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages
all_pages <- (list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
all_pages
all_pages <- (list.files(path = 'data/', pattern = 'html', all.files = TRUE, full.names = TRUE, recursive=TRUE))
lapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
lapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
all_pages
dirs <- dirname(all_pages)
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
tapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
tapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
lapply(all_pages, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
file_info <- file.info(all_pages)
rownames(file_info)
file_info[c("mtime")]
all_pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(all_pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
file_info
file_info[1]
file_info[[1]]
file_info[1][1]
file_info[1,1]
rownames(file_info)
rownames(file_info)[1]
rownames(file_info)[2]
source("C:/Users/bravi/projects/scrapyR/scrapy.R", echo=TRUE)
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
lapply(pages_ordered, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
pages_ordered
class(pages_ordered)
pages_ordered <- list(rownames(file_info))
sapply(pages_ordered, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
pages_ordered[1]
pages_ordered[1,1]
pages_ordered[1][1]
class(pages_ordered)
View(pages_ordered)
pages_ordered[[1]]
pages_ordered[[1]][1]
pages_ordered <- (rownames(file_info))
lapply(pages_ordered, function(pagina){
print(pagina)
#data <-read_html("data/page-1.html")
#class(data)
#html_text(data)
})
pages_ordered[[1]]
list_titulos <- list()
class(list_titulos)
data <-read_html('data/page-1.html')
html_elementos <- data |> html_nodes(xpath='//div[@data-qa="POSTING_CARD_LOCATION"]')
View(html_elementos)
html_elementos[[1]]
html_elementos[[10]]
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
list_titulos <- list()
lapply(pages_ordered, function(pagina){
data <-read_html(pagina)
#class(data)
#html_text(data)
})
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
list_titulos <- list()
data <-read_html('data/page-1.html')
html_elementos <- data |> html_nodes(xpath='//div[@data-qa="POSTING_CARD_LOCATION"]')
View(html_elementos)
html_elementos[[10]]
html_elementos[[11]]
html_elementos[[11]]
xml_attrs(html_elementos[[19]])
html_elementos[[19]]
titulos <- data |> html_elements(xpath='//div[@data-qa="POSTING_CARD_LOCATION"]')
View(titulos)
titulos[[19]]
titulos[[2]]
list_titulos <- c(
list_titulos,
titulos |> html_element('div') |> html_text2()
)
View(list_titulos)
list_titulos[[19]]
titulos[[17]]
xml_child(titulos[[3]], 1)
xml_child(titulos[[3]], 2)
xml_child(titulos[[3]], 3)
titulos[[3]]
xml_attrs(titulos[[3]])
titulos <- data |> xml_nodes('//div[@data-qa="POSTING_CARD_LOCATION"]')
titulos <- data |> html_elements('//div[@data-qa="POSTING_CARD_LOCATION"]')
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
titulos[[4]]
titulos[[19]]
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]') |>
html_elements('div.sc-ge2uzh-2 jneaYd')
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]') |> html_text()
titulos
titulos[20]
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text2()
)
View(list_titulos)
list_titulos <- list()
data <-read_html('data/page-1.html')
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text()
)
list_titulos <- list()
data <-read_html('data/page-1.html')
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text("UTF-8")
)
list_titulos <- list()
data <-read_html('data/page-1.html')
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text("latin1")
)
list_titulos <- list()
data <-read_html('data/page-1.html', encoding="latin1")
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text()
)
repair_encoding(list_titulos)
list_titulos <- list()
data <-read_html('data/page-1.html', encoding="UTF-8")
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text()
)
library(tidyverse)
library(rvest)
library(httr)
set.seed(1)
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
list_titulos <- list()
lapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
#class(data)
#html_text(data)
})
data <-read_html('data/page-1.html', encoding="UTF-8")
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text()
)
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
View(price_from)
price_from[[2]]
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
list_precios <- c(
list_precios,
price_from |> html_text2()
)
list_precios <- list()
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
list_precios <- c(
list_precios,
price_from |> html_text2()
)
View(list_precios)
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
list_precios <- c(
list_precios,
price |> html_text2()
)
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
View(features_1)
features_1[[2]]
features_1[[2]][1]
features_1[[2]][[1]]
features_1[[2]]
features_1[[1]]
features_1[[1]]
xml_child(features_1[[1]], 1)
(features_1[[1]], 1)
features_1[[1]]
features_1[[1,1]]
features_1[[1]]
features_1 <- data |> html_elements(xpath = '.POSTING_CARD_FEATURESnth-child(2)')
features_1 <- data |> html_elements(xpath = '.POSTING_CARD_FEATURES:nth-child(2)')
features_1 <- data |> html_elements('.POSTING_CARD_FEATURES:nth-child(2)')
View(features_1)
features_1
features_1 <- data |> html_elements('ul.POSTING_CARD_FEATURES:nth-child(2)')
features_1
features_1 <- data |> html_elements('ul.POSTING_CARD_FEATURES')
features_1 <- data |> html_elements('ul.sc-i1odl-16 eemioV')
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
list_precios <- c(
list_precios,
price |> html_text2()
)
features_1 <- data |> html_elements('ul.sc-i1odl-16 eemioV')
View(features_1)
features_1
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
View(features_1)
features_1[[1]]
features_1 |> html_element('li') |> html_text2()
features_1 |> html_element('li:(2)') |> html_text2()
features_1 |> html_element('li:nth-child(2)') |> html_text2()
library(tidyverse)
library(rvest)
library(httr)
set.seed(1)
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
list_titulos <- list()
list_precios <- list()
lapply(pages_ordered, function(pagina){
data <-read_html(pagina, encoding="UTF-8")
#class(data)
#html_text(data)
})
data <-read_html('data/page-1.html', encoding="UTF-8")
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text2()
)
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
list_precios <- c(
list_precios,
price_from |> html_text2()
)
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
list_precios <- c(
list_precios,
price |> html_text2()
)
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
habitaciones <- features_1 |> html_element('li:nth-child(2)') |> html_text2()
list_habitaciones <- list()
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
habitaciones <- features_1 |> html_element('li:nth-child(2)') |> html_text2()
list_habitaciones <- c(
list_habitaciones,
habitaciones
)
View(list_habitaciones)
list_area <- list()
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
habitaciones <- features_1 |> html_element('li:nth-child(3)') |> html_text2()
list_area <- c(
list_area,
habitaciones
)
View(list_area)
list_area <- list()
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
area_1 <- features_1 |> html_element('li:nth-child(3)') |> html_text2()
list_area <- c(
list_area,
area_1
)
features_2 <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_FEATURES"]')
area_2 <- features_2 |> html_element('span:nth-child(1)') |> html_text2()
list_area <- c(
list_area,
area_2
)
View(list_area)
library(tidyverse)
library(rvest)
library(httr)
set.seed(1)
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
list_titulos <- list()
list_precios <- list()
list_area <- list()
data <-read_html('data/page-1.html', encoding="UTF-8")
titulos <- data |> html_elements(xpath ='//div[@data-qa="POSTING_CARD_LOCATION"]')
list_titulos <- c(
list_titulos,
titulos |> html_text2()
)
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
list_precios <- c(
list_precios,
price_from |> html_text2()
)
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
list_precios <- c(
list_precios,
price |> html_text2()
)
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
area_1 <- features_1 |> html_element('li:nth-child(3)') |> html_text2()
list_area <- c(
list_area,
area_1
)
features_2 <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_FEATURES"]')
area_2 <- features_2 |> html_element('span:nth-child(1)') |> html_text2()
list_area <- c(
list_area,
area_2
)
View(list_area)
list_links <- list()
links_development <- data |> html_elements(xpath = '//div/div[@data-qa="posting DEVELOPMENT"]') |> html_attr('data-to-posting')
links_development
list_links <- c(
list_links,
links_development
)
View(list_links)
# links of PROPERTY FINISHIED
links_property <- data |> html_elements(xpath = '//div/div[@data-qa="posting PROPERTY"]') |> html_attr('data-to-posting')
list_links <- c(
list_links,
links_property
)
list_links[[11]]
