print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# scrapy of each page
for (id in length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in 1:length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
for (id in 1:length(pages_ordered[[1]])){
page <- paste0('data/page-',id,'.html')
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
}
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
data <-read_html('data/page-15.html', encoding="UTF-8")
# Location of DEVELOPMENT
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
# Location of PROPERTY FINISHIED
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
pages_ordered <- rownames(file_info)
we <- c(pages_ordered)
we
sapply(we, function(page){
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page[1])
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]'))
})
sapply(we, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
pages_ordered <- rownames(file_info)
# List of Proyects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
sapply(pages_ordered, function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
})
# SCRAPY OF EACH PAGE
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
resultado <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
View(resultado)
resultado[["data/page-41.html"]]
sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
library(tidyverse)
library(rvest)
library(httr)
#______SCRAPY WEB_______
# Algoritm to download all pages
set.seed(1)
page_id <- 0
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# SCRAPY OF EACH PAGE
resultado <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
View(resultado)
df_properties <- tibble(
unlist(resultado)
)
names(df_properties) <- c('ubicaci贸n')
View(df_properties)
library(tidyverse)
library(rvest)
library(httr)
#______SCRAPY WEB_______
# Algoritm to download all pages
set.seed(1)
page_id <- 0
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# ....SCRAPY OF EACH PAGE....
# Location of PROPERTY FINISHIED
list_location_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
# price of PROPERTY FINISHIED
list_price_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
print(price)
properties_precios <- c(
properties_precios,
price |> html_text2()
)
})
# features AREA of PROPERTY FINISHIED
list_area_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
features_2 <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_FEATURES"]')
area_2 <- features_2 |> html_element('span:nth-child(1)') |> html_text2()
print(area_2)
properties_area <- c(
properties_area,
area_2
)
})
# links of PROPERTY FINISHIED
list_links_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
links_2 <- data |> html_elements(xpath = '//div/div[@data-qa="posting PROPERTY"]') |> html_attr('data-to-posting')
print(links_2)
properties_links <- c(
properties_links,
links_2
)
})
# Location of DEVELOPMENT
list_location_development <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
titulos_development <- data |> html_elements(xpath ='//div/div[@class="sc-i1odl-17 kiOodf"]')
print(titulos_development |> html_text2())
development_titulos <- c(
development_titulos,
titulos_development |> html_text2()
)
})
# price of DEVELOPMENT
list_price_development <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
price_from <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE_FROM"]')
print(price_from)
development_precios <- c(
development_precios,
price_from |> html_text2()
)
})
# features AREA of DEVELOPMENT
list_area_development <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
features_1 <- data |> html_elements(xpath = '//div/ul[@data-qa="POSTING_CARD_FEATURES"]')
area_1 <- features_1 |> html_element('li:nth-child(3)') |> html_text2()
print(area_1)
development_area <- c(
development_area,
area_1
)
})
# links of DEVELOPMENT
list_links_development <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
links_1 <- data |> html_elements(xpath = '//div/div[@data-qa="posting DEVELOPMENT"]') |> html_attr('data-to-posting')
print(links_1)
development_links <- c(
development_links,
links_1
)
})
df_properties <- tibble(
unlist(list_location_properties),
unlist(list_price_properties),
unlist(list_area_properties),
unlist(list_links_properties)
)
View(list_location_properties)
df_properties_ubicacion <- tibble(
unlist(list_location_properties),
unlist(list_price_properties),
#unlist(list_area_properties),
unlist(list_links_properties)
)
names(df_properties) <- c('ubicaci贸n', 'precio', 'links')
df_properties <- tibble(
unlist(list_location_properties),
unlist(list_price_properties),
#unlist(list_area_properties),
unlist(list_links_properties)
)
names(df_properties) <- c('ubicaci贸n', 'precio', 'links')
View(df_properties)
df_development <- tibble(
unlist(list_location_development),
unlist(list_price_development),
unlist(list_area_development),
unlist(list_links_development)
)
df_development <- tibble(
unlist(list_location_development),
#unlist(list_price_development),
unlist(list_area_development),
unlist(list_links_development)
)
names(df_development) <- c('ubicaci贸n', 'area', 'link')
View(df_development)
library(tidyverse)
library(rvest)
library(httr)
#______SCRAPY WEB_______
# Algoritm to download all pages
set.seed(1)
page_id <- 0
library(tidyverse)
library(rvest)
library(httr)
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
data <-read_html('data/page-1.html', encoding="UTF-8")
features_2 <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_FEATURES"]')
area_2 <- features_2 |> html_text2()
print(area_2)
properties_area <- c(
properties_area,
area_2
)
View(properties_area)
library(tidyverse)
library(rvest)
library(httr)
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# ....SCRAPY OF EACH PAGE....
# Location of PROPERTY FINISHIED
list_location_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
# price of PROPERTY FINISHIED
list_price_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
print(price)
properties_precios <- c(
properties_precios,
price |> html_text2()
)
})
# features AREA of PROPERTY FINISHIED
list_area_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
features_2 <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_FEATURES"]')
area_2 <- features_2 |> html_text2()
print(area_2)
properties_area <- c(
properties_area,
area_2
)
})
# links of PROPERTY FINISHIED
list_links_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
links_2 <- data |> html_elements(xpath = '//div/div[@data-qa="posting PROPERTY"]') |> html_attr('data-to-posting')
print(links_2)
properties_links <- c(
properties_links,
links_2
)
})
# converting the list containg the scraped data into tibble
df_properties <- tibble(
unlist(list_location_properties),
unlist(list_price_properties),
unlist(list_area_properties),
unlist(list_links_properties)
)
unlist(list_location_properties)
ubicacion <- unlist(list_location_properties)
caracteristicas <- unlist(list_area_properties)
library(tidyverse)
library(rvest)
library(httr)
# list of files in a Directory
pages <- (list.files(path = 'data/', pattern = '.html', all.files = TRUE, full.names = TRUE, recursive=FALSE))
# order for Date
file_info <- file.info(pages)
file_info <- file_info[with(file_info, order(as.POSIXct(mtime))), ]
pages_ordered <- rownames(file_info)
# List of Projects in Development
development_titulos <- list()
development_precios <- list()
development_area <- list()
development_links <- list()
# List of Properties Finished
properties_titulos <- list()
properties_precios <- list()
properties_area <- list()
properties_links <- list()
pages_ordered <- list(pages_ordered)
# ....SCRAPY OF EACH PAGE....
# Location of PROPERTY FINISHIED
list_location_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
print(data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]'))
titulos_property <- data |> html_elements(xpath = '//div/div[@class="sc-ge2uzh-1 gFoERJ"]')
properties_titulos <- c(
properties_titulos,
titulos_property |> html_text2()
)
})
# price of PROPERTY FINISHIED
list_price_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
price <- data |> html_elements(xpath = '//div/div[@data-qa="POSTING_CARD_PRICE"]')
print(price)
properties_precios <- c(
properties_precios,
price |> html_text2()
)
})
# features AREA of PROPERTY FINISHIED
list_area_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
features_2 <- data |> html_elements(xpath = '//div/div[@class="sc-i1odl-5 eodGhu"]')
area_2 <- features_2 |> html_text2()
print(area_2)
properties_area <- c(
properties_area,
area_2
)
})
# links of PROPERTY FINISHIED
list_links_properties <- sapply(pages_ordered[[1]], function(page){
print(page)
data <-read_html(page, encoding="UTF-8")
links_2 <- data |> html_elements(xpath = '//div/div[@data-qa="posting PROPERTY"]') |> html_attr('data-to-posting')
print(links_2)
properties_links <- c(
properties_links,
links_2
)
})
# converting the list containg the scraped data into tibble
df_properties <- tibble(
unlist(list_location_properties),
unlist(list_price_properties),
unlist(list_area_properties),
unlist(list_links_properties)
)
