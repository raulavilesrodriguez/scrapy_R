habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,c(3:8)] <- mutate_if(is.character, as.numeric)
df_properties[,c(3:8)] <- as.numeric(df_properties[,c(3:8)])
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
sum(df_properties$valor)
df_properties$valor[1]
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, regex(".", "")))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, regex(".", ",")))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, ".", ""))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\.", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties$valor[1]
df_properties$valor[1]+df_properties$valor[2]
sum(df_properties$valor)
df_properties[is.na(df_properties)] <- 0
df_properties[is.na(df_properties[, c(3:8)])] <- 0
is.na(df_properties[, c(3:8)])
df_properties[, is.na(df_properties[, c(3:8)])] <- 0
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\.", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("^USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\.", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\.*", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\d+\\.?\\d+\\.?\\d*", "\\d+\\d+\\d*"))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace(valor, "\\.*", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties$valor <- df_properties$valor |> mutate_all(list(~str_replace(., ".", "")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., ".", "")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., "\\.+", "")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., "\\.{1,}", "")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., ".{1,}", "")))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., "\\.{1,}", "", perl=TRUE)))
ver <- '1.000.000'
sub("\\.*", "", ver)
gsub("\\.*", "", ver, fixed = TRUE)
gsub(".", "", ver, fixed = TRUE)
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+")))
df_properties[,3] <- df_properties[,3] |> mutate_all(list(~str_replace(., "[:punct:]", "", perl=TRUE)))
df_properties[,3] <- df_properties[,3] |> mutate(valor = str_replace(valor, "[:punct:]", ""))
df_properties[,3] <- df_properties[,3] |> mutate(valor = str_replace_all(valor, "[:punct:]", ""))
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "[:punct:]", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
sum(df_properties$valor)
df_properties <- read_excel('properties.xlsx')
df_development <- read_excel('development.xlsx')
df_properties <- df_properties |>
mutate(valor = str_extract(total, regex("USD\\s*\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(total, regex("USD\\s*\\d+\\s*(?i)Condominio/Alícuota")),
area = str_extract(total, regex("\\d+\\s*(?i)m²")),
habitaciones = str_extract(total, regex("\\d+\\s*(?i)hab.")),
baños = str_extract(total, regex("\\d+\\s*(?i)baños")),
estacionamientos = str_extract(total, regex("\\d+\\s*(?i)estac.")),
ubicacion_general = str_extract(total, regex(".+,\\s+Quito")))
# string splitting
we <- str_split(df_properties$total, '\n')
# add column ubicación específica
df_properties <- df_properties |>
mutate(ubicacion_especifica = map_chr(we, 3))
# change of character to numeric several columns
df_properties <- df_properties |>
mutate(valor = str_extract(valor, regex("\\d+\\.?\\d+\\.?\\d*")),
alicuota = str_extract(alicuota, regex("\\d+")),
area = str_extract(area, regex("\\d+\\.?\\d?")),
habitaciones = str_extract(habitaciones, regex("\\d+")),
baños = str_extract(baños, regex("\\d+")),
estacionamientos = str_extract(estacionamientos, regex("\\d+"))) |>
mutate(valor = str_replace_all(valor, "\\.", ""))
df_properties[,c(3:8)] <- lapply(df_properties[,c(3:8)], as.numeric)
df_properties[c(3:8)][is.na(df_properties[c(3:8)])] <- 0
sum(df_properties$valor)
